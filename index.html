<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stack by Dineth</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
body {
  margin: 0;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background: black;
  font-family: 'Press Start 2P', cursive;
  overflow: hidden;
  flex-direction: column;
  transition: background 0.8s ease;
}

/* Landing Words */
.bounce {
  font-size: 4rem;
  opacity: 0;
  display: inline-block;
  animation: bounceUpSide 1.5s ease forwards;
}

@keyframes bounceUpSide {
  0% { transform: translate(-50px, 300px) rotate(-15deg); opacity: 0; }
  30% { transform: translate(10px, -20px) rotate(10deg); opacity: 1; }
  50% { transform: translate(-10px, -10px) rotate(-5deg); }
  70% { transform: translate(5px, -5px) rotate(3deg); }
  100% { transform: translate(0,0) rotate(0deg); }
}

#landing, #main, #result { display: none; text-align: center; }

#main { flex-direction: column; align-items: center; justify-content: center; display: none; }
/* Head bob animation */
.pixel-head {
  width: 128px; /* bigger head */
  height: 128px;
  background: url('head-sprite.png') no-repeat center/contain;
  image-rendering: pixelated;
  animation: headBob 1.5s ease-in-out infinite;
  margin-bottom: 10px;
}
@keyframes headBob {
  0%,100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

.speech-bubble {
  display: inline-block;
  background: white;
  border: 3px solid black;
  padding: 20px;
  font-size: 1.2rem;
  margin: 20px;
  max-width: 300px;
}

input, button {
  border: 3px solid black;
  background: #c0c0c0;
  padding: 10px;
  font-family: 'Press Start 2P', cursive;
  font-size: 1.2rem;
  margin-top: 20px;
  width: 60%;
  text-align: center;
}
button { width: auto; padding: 10px 20px; }

/* Simple Red Pixel Hearts */
.heart {
  position: absolute;
  width: 32px;
  height: 32px;
  background: red;
  clip-path: polygon(
    50% 15%, 61% 0, 75% 0, 100% 25%, 100% 50%, 
    50% 100%, 0 50%, 0 25%, 25% 0, 39% 0
  );
  animation: floatUp 5s linear forwards;
}

@keyframes floatUp {
  0% { transform: translateY(100vh) scale(1); opacity: 1; }
  100% { transform: translateY(-10vh) scale(1.5); opacity: 0; }
}
</style>
</head>
<body>

<!-- Background music -->
<audio id="bg-music" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<div id="landing"></div>

<div id="main">
  <div class="pixel-head" id="head"></div> <!-- Head now just bobs -->
  <div class="pixel-boy blink" id="boy"></div>
  <div class="speech-bubble" id="bubble">What is the name of Dineth's mother?)</div>
  <input type="text" id="answer" placeholder="Enter name">
</div>

<div id="result"></div>

<script>
const landing = document.getElementById("landing");
const main = document.getElementById("main");
const result = document.getElementById("result");
const bubble = document.getElementById("bubble");
const boy = document.getElementById("boy");
const words = ["stack","by","dineth"];
const colors = ["#ffb3ba","#bae1ff","#cba0ff"]; // pastel

const audio = document.getElementById("bg-music");
let musicPlayed = false;
document.body.addEventListener('click', () => {
  if(!musicPlayed){ audio.play(); musicPlayed = true; }
});

async function landingAnimation(){
  for(let i=0;i<words.length;i++){
    let span=document.createElement("div");
    span.className="bounce";
    span.style.animationDelay=`${i}s`;
    span.style.color=colors[i];
    span.innerText=words[i];
    landing.appendChild(span);
    landing.style.display="block";
  }
  await new Promise(r=>setTimeout(r,4500));
  document.body.style.background="#add8e6";
  landing.style.display="none";
  main.style.display="flex";
}

function spawnHearts(){
  for(let i=0;i<40;i++){
    let heart=document.createElement("div");
    heart.className="heart";
    heart.style.left=Math.random()*100+"vw";
    heart.style.animationDuration=(3+Math.random()*3)+"s";
    document.body.appendChild(heart);
    heart.addEventListener("animationend",()=>heart.remove());
  }
}

function showGoAgainScreen(){
  result.innerHTML = `
    <div class="speech-bubble">Correct!üòå‚ù§Ô∏è</div>
    <button onclick="location.reload()">Go Again</button>
  `;
  result.style.display="block";
}

document.getElementById("answer").addEventListener("keypress",function(e){
  if(e.key==="Enter"){
    let val=e.target.value.trim();
    if(val.toLowerCase()==="irani","Irani"){
      document.body.style.background="pink";
      spawnHearts();
      main.style.display="none";
      showGoAgainScreen();
    } else {
      boy.classList.add("frown");
      document.body.style.background="yellow";
      setTimeout(()=>{
        boy.classList.remove("frown");
        document.body.style.background="#add8e6";
        e.target.value="";
      },1000);
    }
  }
});

landingAnimation();
</script>
</body>
</html>
